<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    .one{
        width: 800px;
        margin: 0 auto;
    }
    input{
        width: 100%;
        height: 30px;
    }
    textarea{
        width: 100%;
    }
    .item{
        padding: 10px 0;
        border-bottom: 1px solid #b4b4b4;
    }
    .item div{
        margin-top: 10px;
    }
    </style>
</head>
<body>
    <div id="app">
        <my-component-one></my-component-one>
        <my-component-two></my-component-two>
    </div>
    <template id="one">
        <div class="one">
            <h2>评论人</h2>
            <div>
                <input type="text" v-model="info.name">
            </div>
            <h2>评论内容</h2>
            <div>
                <textarea cols="30" rows="10" v-model="info.content"></textarea>
            </div>
            <div>
                <button @click="send">发表</button>
            </div>
        </div>
    </template>
    <template id="two">
        <div class="one">
            <h1>留言板：</h1>
            <div v-for="(item,index) in list" :key="index" class="item">
                <div>
                    作者：{{item.name}}
                </div>
                <div>
                    内容：{{item.content}}
                    <button style="float: right;" @click="list.splice(index,1)">删除</button>
                </div>
            </div>
        </div>
    </template>
</body>
<script src="../vue.js"></script>
<script>
    // 创建一个空vue实例
    let bus = new Vue();
     let myComponentOne = {
        template:"#one",
        data() {
            return {
                info:{
                    name:"",
                    content:""
                }
            }
        },
        methods: {
            send(){
                console.log(this.info)
                // 发送一个自定义事件
                bus.$emit("sendinfo",this.info)
            }
        },
     } 
     let myComponentTwo = {
        template:"#two" ,
        data() {
            return {
                list:[
                    {
                        name:"小明",
                        content:"小明是个帅哥"
                    },{
                        name:"小红",
                        content:"小红是个爷们"
                    }
                ]
            }
        },
        created() {
            // 监听自定义事件
            bus.$on("sendinfo",(value)=>{
                console.log(value)
                this.list.push(value)
            })
        },
     }
     new Vue({
        el:"#app",
        components:{
            myComponentOne,
            myComponentTwo
        }
     })
</script>
</html>