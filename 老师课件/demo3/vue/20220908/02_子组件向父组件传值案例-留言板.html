<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .parent{
            width: 1000px;
            margin: 0 auto;
        }
        .msg{
            padding: 10px 0;
            border-bottom: 1px solid #e4e4e4;
        }
        input{
            width: 100%;
            height: 40px;
        }
        textarea{
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="app">
        <parent></parent>
    </div>
    <template id="parent">
        <div class="parent">
            <child @sendobj="getObj"></child>
            <h1>留言板</h1>
            <div >
                <div v-for="(item,index) in list" :key="index" class="msg">
                    <div>
                        作者：{{item.name}}
                    </div>
                    <div>
                        内容：{{item.content}}
                        <button style="float: right;" @click="list.splice(index,1)">删除</button>
                    </div>
                </div>
            </div>
            <div style="text-align:center;" v-show="list.length==0">
                暂无数据
            </div>
        </div>
    </template>
    <template id="child">
        <div>
            <h2>评论人</h2>
            <div>
                <input type="text" v-model="name">
            </div>
            <h2>评论内容</h2>
            <div>
                <textarea cols="30" rows="10" v-model="content"></textarea>
            </div>
            <div>
                <button @click="send">发表</button>
            </div>
        </div>
    </template>
</body>
<script src="../vue.js"></script>
<script>
    let child = {
        template:"#child",
        data() {
            return {
                name:"",
                content:""
            }
        },
        methods: {
            send(){
                console.log(this.name,this.content)
                
                let obj = {
                    name:this.name,
                    content:this.content
                };
                // 发送一个自定义事件
                this.$emit("sendobj",obj);
                this.name='';
                this.content = '';

            }
        },
    }
    let parent = {
        template:"#parent",
        components:{
            child
        },
        data() {
            return {
                list:[
                    {
                        name:"小明",
                        content:"小明是个帅哥！！！"
                    },{
                        name:"小红",
                        content:"小红是个美女"
                    }
                ]
            }
        },
        methods:{
            getObj(obj){
                console.log(obj)
                this.list.push(obj)
            }
        }
    }

     new Vue({
        el:"#app",
        components:{
            parent
        }
     })
</script>
</html>