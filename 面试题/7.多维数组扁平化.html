<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多维数组扁平化</title>
</head>

<body>
    多维数组扁平化：将多维数组展开为一维数组
</body>
<script>
    let array = [[222, 333, 444], [55, 66]]
    //方法一：es6中的flat()方法，参数代表数组有几层，比如[222,[333,[444,555]]]则传参为3
    let arrFlat = array.flat(2);//[222, 333, 444, 55, 66]
    console.log(arrFlat);
    let arr = [[222, 333, 444], [55, 66]]
    //方法二：数组加一个空字符串转化为字符串--只适用于数字数组
    arr += ""
    // console.log(arr);//222,333,444,55,66
    //split() 方法用于把一个字符串分割成字符串数组。
    arr = arr.split(",")
    console.log(arr)
    let arr1 = [[222, 333, 444], [55, 66]];
    //方法三：递归
    let oarr = [];
    function desArr(arr) {
        let toArr = function (arr) {
            arr.forEach(element => {
                Array.isArray(element) ? desArr(element) : oarr.push(element)
            });
        }
        toArr(arr);
        // console.log(oarr);
        return oarr
    }
    console.log(desArr(arr1));
    //方法四：apply()结合concat()使用以展开成一维数组，只能用于二维数组
    let arr4 = [11, 22, [333, 444, [55, 666]]];
    let res4 = arr4.concat.apply([], arr4);
    console.log(res4);//[11, 22, 333, 444, Array(2)]0: 111: 222: 3333: 4444: (2) [55, 666]length: 5[[Prototype]]: Array(0)

    let arr5 = [11, 22, [333, 444, [55, 666]]];

    // 方法五使用reduce和concat方法，结合递归，利用重写原型的另一种方法
    Array.prototype.flatten = function () {
        return this.reduce(function (prev, cur) {
            var moreArr = [].concat(cur).some(Array.isArray); //判断cur是不是一个数组
            return prev.concat(moreArr ? cur.flatten() : cur);
        }, []);
    };
    var bbb = [1, 2, 3, [4, [5, 6, [7, 8]]]]
    var ccc = bbb.flatten();
    console.log(ccc);//结果为[1, 2, 3, 4, 5, 6, 7, 8]

    //方法七 es6扩展运算符
    function flattens(arr) {
        while (arr.some(item => Array.isArray(item))) {
            arr = [].concat(...arr);
        }
        return arr;
    }
    var sunArr = [1, 2, 3, [4, [5, [6]]]];
    console.log(flattens(sunArr));//结果为 [1, 2, 3, 4, 5, 6]


</script>

</html>