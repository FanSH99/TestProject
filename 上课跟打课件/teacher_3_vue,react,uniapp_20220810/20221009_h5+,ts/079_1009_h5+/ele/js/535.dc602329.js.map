{"version":3,"file":"js/535.dc602329.js","mappings":"iJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,aAAa,CAACG,YAAYL,EAAIM,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,WAAW,MAAO,CAACN,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,WAAW,CAACO,MAAM,CAAC,KAAO,cAAcC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOX,EAAIY,QAAQC,IAAI,EAAG,MAAK,GAAI,EAACC,OAAM,GAAM,CAACP,IAAI,SAASC,GAAG,WAAW,MAAO,CAACN,EAAG,MAAM,CAACF,EAAIe,GAAG,UAAW,EAACD,OAAM,OAAWd,EAAIgB,SAAUd,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,WAAW,CAACO,MAAM,CAAC,UAAU,IAAIC,GAAG,CAAC,MAAQV,EAAIiB,YAAYZ,YAAYL,EAAIM,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACN,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACJ,EAAIe,GAAG,QAAS,EAACD,OAAM,GAAM,CAACP,IAAI,aAAaC,GAAG,WAAW,MAAO,CAACN,EAAG,MAAM,CAACE,YAAY,SAASK,MAAM,CAAC,IAAM,8BAAgCT,EAAIgB,SAASE,OAAO,IAAM,MAAMhB,EAAG,WAAW,CAACE,YAAY,QAAQK,MAAM,CAAC,KAAO,WAAY,EAACK,OAAM,IAAO,MAAK,EAAM,YAAYZ,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,MAAM,UAAU,GAAG,MAAQT,EAAIgB,SAASG,YAAYjB,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,OAAO,UAAU,OAAO,GAAGT,EAAIoB,KAAMpB,EAAIgB,SAAUd,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,MAAM,CAACJ,EAAIe,GAAG,UAAUb,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,KAAK,UAAU,GAAG,KAAO,cAAc,GAAGT,EAAIoB,KAAMpB,EAAIgB,SAAUd,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,MAAM,CAACJ,EAAIe,GAAG,UAAUb,EAAG,WAAW,CAACO,MAAM,CAAC,MAAQ,OAAO,UAAU,GAAG,MAAQ,SAAS,GAAGT,EAAIoB,KAAMpB,EAAIgB,SAAUd,EAAG,MAAM,CAACmB,YAAY,CAAC,MAAQ,MAAM,OAAS,cAAc,CAACnB,EAAG,aAAa,CAACO,MAAM,CAAC,MAAQ,UAAU,MAAQ,GAAG,KAAO,UAAU,CAACT,EAAIe,GAAG,WAAW,GAAGf,EAAIoB,KAAKlB,EAAG,QAAQ,CAACoB,IAAI,SAASD,YAAY,CAAC,QAAU,QAAQZ,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,OAASV,EAAIuB,eAAe,EAC9kD,EACGC,EAAkB,G,oBC6CtB,GACAC,OACA,OACAT,SAAAA,KAEA,EACA,gBACA,oBAAAU,QAAAA,KAAAA,OAAAA,MAAAA,UACAC,QAAAA,IAAAA,GACA,iBAIA,qBAHA,kBAIA,EACAC,QAAAA,CACAX,aACAU,QAAAA,IAAAA,QACAA,QAAAA,IAAAA,KAAAA,MAAAA,QACA,yBACA,EACA,oBACAA,QAAAA,IAAAA,GAEA,wBACAA,QAAAA,IAAAA,GAEA,mBACAF,EAAAA,OAAAA,OAAAA,GAEA,gDACAE,QAAAA,IAAAA,GACAE,EAAAA,EAAAA,QAAAA,QACA,sCACA,ICjF8P,I,UCQ1PC,GAAY,OACd,EACA/B,EACAyB,GACA,EACA,KACA,WACA,MAIF,EAAeM,EAAiB,O,4FCjBhC,IAAIC,EAAkBN,IAAQO,EAAAA,EAAAA,GAAY,WAAUP,GAEhDQ,EAAa,CAACP,EAAQD,KAAQS,EAAAA,EAAAA,GAAa,iBAAgBR,WAAiBD,E","sources":["webpack://ele/./src/views/userInfo/index.vue","webpack://ele/src/views/userInfo/index.vue","webpack://ele/./src/views/userInfo/index.vue?2be7","webpack://ele/./src/views/userInfo/index.vue?ff52","webpack://ele/./src/api/user.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page\"},[_c('my-nav-bar',{scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('div',{staticClass:\"lefts\"},[_c('van-icon',{attrs:{\"name\":\"arrow-left\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}})],1)]},proxy:true},{key:\"center\",fn:function(){return [_c('div',[_vm._v(\"账户信息\")])]},proxy:true}])}),(_vm.userInfo)?_c('div',{staticClass:\"user\"},[_c('van-cell',{attrs:{\"is-link\":\"\"},on:{\"click\":_vm.changeFile},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('span',{staticClass:\"custom-title\"},[_vm._v(\"头像\")])]},proxy:true},{key:\"right-icon\",fn:function(){return [_c('img',{staticClass:\"acatar\",attrs:{\"src\":'https://elm.cangdu.org/img/' + _vm.userInfo.avatar,\"alt\":\"\"}}),_c('van-icon',{staticClass:\"right\",attrs:{\"name\":\"arrow\"}})]},proxy:true}],null,false,71080773)}),_c('van-cell',{attrs:{\"title\":\"用户名\",\"is-link\":\"\",\"value\":_vm.userInfo.username}}),_c('van-cell',{attrs:{\"title\":\"收货地址\",\"is-link\":\"\"}})],1):_vm._e(),(_vm.userInfo)?_c('div',[_c('p',{staticClass:\"bd\"},[_vm._v(\"账号绑定\")]),_c('van-cell',{attrs:{\"title\":\"手机\",\"is-link\":\"\",\"icon\":\"phone-o\"}})],1):_vm._e(),(_vm.userInfo)?_c('div',[_c('p',{staticClass:\"bd\"},[_vm._v(\"安全设置\")]),_c('van-cell',{attrs:{\"title\":\"登录密码\",\"is-link\":\"\",\"value\":\"修改\"}})],1):_vm._e(),(_vm.userInfo)?_c('div',{staticStyle:{\"width\":\"95%\",\"margin\":\"20px auto\"}},[_c('van-button',{attrs:{\"color\":\"#d8584a\",\"block\":\"\",\"size\":\"small\"}},[_vm._v(\"退出登录\")])],1):_vm._e(),_c('input',{ref:\"myfile\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.fileChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page\">\n    <my-nav-bar>\n      <!-- 具名插槽 -->\n      <template #left>\n        <div class=\"lefts\">\n          <van-icon name=\"arrow-left\" @click=\"$router.go(-1)\"></van-icon>\n        </div>\n      </template>\n      <template #center>\n        <div>账户信息</div>\n      </template>\n    </my-nav-bar>\n    <div class=\"user\" v-if=\"userInfo\">\n      <van-cell is-link @click=\"changeFile\">\n        <template #title>\n          <span class=\"custom-title\">头像</span>\n        </template>\n        <template #right-icon>\n          <img\n            :src=\"'https://elm.cangdu.org/img/' + userInfo.avatar\"\n            alt=\"\"\n            class=\"acatar\"\n          />\n          <van-icon name=\"arrow\" class=\"right\" />\n        </template>\n      </van-cell>\n      <van-cell title=\"用户名\" is-link :value=\"userInfo.username\" />\n      <van-cell title=\"收货地址\" is-link />\n    </div>\n    <div v-if=\"userInfo\">\n      <p class=\"bd\">账号绑定</p>\n      <van-cell title=\"手机\" is-link icon=\"phone-o\" />\n    </div>\n    <div v-if=\"userInfo\">\n      <p class=\"bd\">安全设置</p>\n      <van-cell title=\"登录密码\" is-link value=\"修改\" />\n    </div>\n    <div style=\"width: 95%; margin: 20px auto\" v-if=\"userInfo\">\n      <van-button color=\"#d8584a\" block size=\"small\">退出登录</van-button>\n    </div>\n    <input type=\"file\" ref=\"myfile\" style=\"display: none;\" @change=\"fileChange\">\n  </div>\n</template>\n<script>\nimport { getUserProFile,uploadFile} from \"@/api/user\";\nimport { Toast } from \"vant\";\nexport default {\n  data() {\n    return {\n      userInfo: null,\n    };\n  },\n  async created() {\n    let res = await getUserProFile({ user_id: this.$store.state.user_id });\n    console.log(res);\n    if (res.data.status == 0) {\n      this.userInfo = null;\n      return;\n    }\n    this.userInfo = res.data;\n  },\n  methods: {\n    changeFile(){\n        console.log(\"选择图片\")\n        console.dir(this.$refs.myfile)\n        this.$refs.myfile.click();\n    },\n    async fileChange(e){\n        console.log(e)\n        // 获取当前要上传的文件对象信息\n        let file = e.target.files[0];\n        console.log(file)\n        // 注意：上传文件的参数类型为 from Data类型\n        let data = new FormData();\n        data.append(\"file\",file);\n        // 上传文件的 content-type multipart/form-data\n        let res = await uploadFile(this.$store.state.user_id,data);\n        console.log(res)\n        Toast.success(\"上传成功\")\n        this.userInfo.avatar = res.data.image_path\n    }\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.user {\n  background: #fff;\n  margin: 10px 0;\n  .acatar {\n    width: 40px;\n    height: 40px;\n    display: block;\n    border-radius: 50%;\n  }\n\n  .right {\n    margin-left: 5px;\n    line-height: 40px;\n    color: #b4b4b4;\n  }\n  .custom-title {\n    line-height: 40px;\n  }\n}\n.bd {\n  padding: 10px 15px;\n  font-size: 13px;\n  color: #666;\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=466c2d38&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=466c2d38&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"466c2d38\",\n  null\n  \n)\n\nexport default component.exports","import { postRequest, requestGet } from \"@/utils/requset\";\n\nlet getUserProFile = (data)=> requestGet(`/v1/user`,data);\n\nlet uploadFile = (user_id,data)=> postRequest(`/eus/v1/users/${user_id}/avatar`,data)\nexport {\n    getUserProFile,\n    uploadFile\n}"],"names":["render","_vm","this","_c","_self","staticClass","scopedSlots","_u","key","fn","attrs","on","$event","$router","go","proxy","_v","userInfo","changeFile","avatar","username","_e","staticStyle","ref","fileChange","staticRenderFns","data","user_id","console","methods","Toast","component","getUserProFile","requestGet","uploadFile","postRequest"],"sourceRoot":""}