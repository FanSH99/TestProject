<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>

        var data = [

            {
                code: 1,
                list: [{

                    name: '海绵宝宝',
                    title: '值1',
                    arr: [2, 3, 4],
                    obj: {
                        name: '123'
                    }

                },
                {
                    name: '派大星',
                    title: '值2',
                    arr: [2, 3, 4],
                    obj: {
                        name: '123'
                    }

                }
                ]
            },


            {
                code: 2,
                list: [{
                    name: '白浅',
                    title: '值2——1',
                    arr: [20, 30, 40],
                    obj: {
                        name: '888'
                    }

                },
                {
                    name: '花千骨',
                    title: '值2——2',
                    arr: [200, 300, 400],
                    obj: {
                        name: '999'
                    }

                }
                ]
            }

        ]

        // 深拷贝

        var obj = {};
        var obj = data;
        console.log(obj, data);//浅拷贝 ---一个便连一个也会改变
        obj[0].code = 0;
        console.log(obj, data);
        var obj2 = {};
        Object.assign(obj, data);
        console.log(obj, data);
        obj[0].code = 11;
        console.log(obj[0], data[0]);
        obj[1].list.push({ age: '18' });
        console.log(obj[1], data[1]);

        // assign对简单的对象可以深拷贝，但是复杂的话不能深拷贝。

        function deepCopy(obj) {
            if (typeof obj != 'object') {
                // 普通数据类型
                return obj;
            }
            // 数组或者对象
            var newObj = obj instanceof Array ? [] : {};
            for (var key in obj) {
                newObj[key] = deepCopy(obj[key]);//对于多层，重复调用，
            }
            return newObj;
        }

        var obj1 = {
            code: 1,
            list: [
                {

                    name: '花千骨',
                    title: '值2——2',
                    arr: [200, 300, 400],
                    obj: {
                        name: '999'
                    }
                }
            ],
        };

        var newObj = deepCopy(obj1);
        console.log('nweObj1', newObj, obj1);
        newObj.list.push('isShow:true');
        console.log('newObj1', newObj, obj1);

        /*
newObj1:
{
code: 1
list: Array(2)
--0:
arr: (3) [200, 300, 400]
name: "花千骨"
obj: {name: "999"}
title: "值2——2"
__proto__: Object
--1: "isShow:true"
length: 2
}
obj1:
{code: 1, list: Array(1)}
code: 1
list: Array(1)
0:
arr: (3) [200, 300, 400]
name: "花千骨"
obj: {name: "999"}
title: "值2——2"
length:1
        */

        /*
        
{code: 1, list: Array(1)}
code: 1
list: Array(1)
0:
arr: (3) [200, 300, 400]
name: "花千骨"
obj: {name: "999"}
title: "值2——2"
        */

        var newObj2 = deepCopy(data);
        console.log(newObj2);
        /*
 (2) [{…}, {…}]
0: {code: 11, list: Array(2)}
1: {code: 2, list: Array(3)}
        */
    </script>
</body>

</html>