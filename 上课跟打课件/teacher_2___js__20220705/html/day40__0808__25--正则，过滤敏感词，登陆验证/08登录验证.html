<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* 不可用 */
        .btn-disable {
            width: 100px;
            height: 40px;
            background-color: rgba(255, 0, 0, 0.4);
            color: #fff;
            border: 0 none;
            cursor: pointer;
        }

        .btn-able {
            width: 100px;
            height: 40px;
            background-color: rgba(255, 0, 0, 1);
            color: #fff;
            border: 0 none;
            cursor: pointer;
        }

        tr {
            height: 28px;
        }

        td:nth-child(1) {
            text-align: right;
        }

        span {
            color: red;
            display: none;
        }

        tr:nth-child(5) {
            height: 40px;
        }
    </style>
</head>

<body>

    <form action="success.html" method="get" onsubmit="return disForm()">
        <table>
            <tr>
                <td><label for="uname">请输入用户名：</label></td>
                <td><input type="text" name="user" id="txt1"></td>
                <td><span id="txt1Tip"></span></td>
            </tr>
            <tr>
                <td><label for="pwd">请输入密码：</label></td>
                <td><input type="text" name="pwd" id="txt2"></td>
                <td><span id="txt2Tip"></span></td>
            </tr>

            <tr>
                <td><label for="pwd">请再次输入密码：</label></td>
                <td><input type="text" name="pwd2" id="txt3"></td>
                <td><span id="txt3Tip"></span></td>
            </tr>

            <tr>
                <td><label for="tel">请输入手机号:</label></td>
                <td><input type="text" name="tel" id="txt4"></td>
                <td><span id="txt4Tip"></span></td>
            </tr>


        </table>
        <p>
            <input type="checkbox" value="cbx" id="cbx">同意***协议
        </p>
        <p>
            <input type="submit" value="注册" class="btn-disable" id="btn" disabled>
        </p>

        <!--  <p>
            <label for="uname">请输入账号：</label>
            <input type="text" name="user" id="txt1">
            <span id="txt1Tip"></span>
        </p>
        <p>
            <label for="pwd">请输入密码：</label>
            <input type="text" name="pwd" id="txt2">
            <span id="txt2Tip"></span>
        </p>
        <p>
            <label for="pwd">请再次输入密码：</label>
            <input type="text" name="pwd2" id="txt3">
            <span id="txt3Tip"></span>
        </p>
        <p>
            <label for="tel">请输入手机号:</label>
            <input type="text" name="tel" id="txt4">
            <span id="txt4Tip"></span>
        </p> -->
        <!-- <p>
            <input type="checkbox" value="cbx" id="cbx">同意***协议
        </p>
        <p>
            <input type="submit" value="注册" class="btn-disable" id="btn" disabled>
        </p> -->

    </form>


    <script>
        var txt1 = document.querySelector('#txt1');
        var txt2 = document.querySelector('#txt2');
        var txt3 = document.querySelector('#txt3');
        var txt4 = document.querySelector('#txt4');
        var txt1Tip = document.querySelector('#txt1Tip');
        var txt2Tip = document.querySelector('#txt2Tip');
        var txt3Tip = document.querySelector('#txt3Tip');
        var txt4Tip = document.querySelector('#txt4Tip');
        var cbx = document.querySelector('#cbx');
        var btn = document.querySelector('#btn');
        console.log(txt1, txt2, txt1Tip, txt2Tip, btn);
        function disForm() {
            return testUser() && testPwd() && testAgPwd() && testTel();
        }
        txt1.onblur = function () {
            testUser();
        }
        function testUser() {

            var v1 = txt1.value;
            if (v1.trim().length == 0) {
                txt1Tip.innerHTML = '用户名不能为空';
                txt1Tip.style.display = 'block'
                return false;
            }
            else {
                var patt1 = /^[0-9A-Za-z]{8,12}$/;
                var flag = patt1.test(v1);
                if (!flag) {
                    txt1Tip.innerHTML = '用户名格式不对，用户名为8-12位的数字和字母组合。';
                    txt1Tip.style.display = 'block'
                    return false;
                }
                txt1Tip.innerHTML = '格式正确';
                txt1Tip.style.color = 'green';
                txt1Tip.style.display = 'block'
                return true;
            }

        }
        txt2.onblur = function () {
            testPwd();
        }
        function testPwd() {

            var v2 = txt2.value;
            if (v2.trim().length == 0) {
                txt2Tip.innerHTML = '密码不能为空';
                return false;
            }
            else {
                var patt2 = /^\d{6}$/;
                var flag = patt2.test(v2);
                if (!flag) {
                    txt2Tip.innerHTML = '密码格式不对，密码为6位数字。';
                    txt2Tip.style.display = 'block'
                    return false;
                }
                txt2Tip.innerHTML = '格式正确';
                txt2Tip.style.color = 'green';
                txt2Tip.style.display = 'block'
                return true;
            }

        }
        txt3.onblur = function () {
            testAgPwd();
        }
        function testAgPwd() {

            if (txt2.value !== txt3.value) {
                txt3Tip.style.display = 'block';
                return false;
            }
            txt3Tip.innerHTML = '格式正确';
            txt3Tip.style.color = 'green';
            txt3Tip.style.display = 'block'
            return true;
        }
        txt4.onblur = function () {
            testTel();
        }
        function testTel() {

            if (txt4.value.trim().length != 0 || txt4.value != '') {
                var patt4 = /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/
                var v4 = txt4.value;
                console.log(v4);
                var flag = patt4.test(v4);
                console.log(flag);
                if (!flag) {
                    txt4Tip.innerHTML = '请输入正确的手机号（11位）';
                    txt4Tip.style.display = 'block';
                    return false;
                }
                txt4Tip.innerHTML = '格式正确';
                txt4Tip.style.color = 'green';
                txt4Tip.style.display = 'block'
                return true;
            }
        }
        cbx.onchange = function () {
            if (this.checked) {
                btn.disabled = false;
                btn.className = 'btn-able';
            }
            else {
                btn.disabled = true;
                btn.className = 'btn-disable';
            }
        }
    </script>
</body>

</html>