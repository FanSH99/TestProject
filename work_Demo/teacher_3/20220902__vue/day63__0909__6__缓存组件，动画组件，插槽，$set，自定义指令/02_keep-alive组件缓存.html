<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
        }

        .lol {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
        }

        .lol .lol_item {
            width: 120px;
            text-align: center;
        }

        .img {
            width: 100%;
        }

        .nav {
            width: 100%;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            /*  background: #9257a5; */
        }

        .nav div {
            width: 22%;
            padding: 10px 0;
            font-size: 13px;
            text-align: center;
            font-weight: bold;
            position: relative;
            cursor: pointer;
        }

        .nav div.active {
            color: red;
        }

        .nav div.active::after {
            content: "";
            position: absolute;
            width: 10px;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: red;


        }
    </style>
</head>

<body>
    <div id="app">
        <div class="nav">
            <!-- :class="{active===index}" -->
            <div v-for="(item,index) in navList" :key="index" @click="goNav(index)" :class="{active:active===index}">
                {{item}}
            </div>
        </div>
        <!-- vue中自带的缓存组件，会自动保存组件的状态，不会刷新。 
        includes属性指定要缓存那些组件
        缓存---状态不会改变，不会重复加载，可以提高性能。
        写法有三种
        1.值为字符串，表示要缓存的名称，多个组件之间用逗号隔开。如include='home,cate'
        2.绑定include时值为数组，数组中为要缓存的每个组件名称 如":include=["home","cate"]
        3.值为正则表达式，:include='/home|cate/'
        -->

        <keep-alive :include="/home|cate/">
            <component :is="componentName"></component>
        </keep-alive>
        <!-- exclude属性表示匹配到的组件够不会被缓存 -->
        <!-- <keep-alive :exclude="['home','cate']">
            <component :is="componentName"></component>
        </keep-alive> -->
    </div>

    <template id="home">
        <div class="lol">
            <div class="lol_item" v-for="(item,index) in list" :key="index">
                <img :src="`https://game.gtimg.cn/images/lol/act/img/champion/${item.alias}.png`" alt="">
                <p>{{item.title}}</p>
            </div>
        </div>

    </template>
</body>
<script src="../bin/vue-2.7.10.js"></script>
<script>
    /* 2022年9月9日09:19:49 */
    let home = {
        template: "#home",
        data() {
            return {
                list: [],
            }
        },
        created() {
            let xhr = new XMLHttpRequest();
            xhr.open("get", "https://game.gtimg.cn/images/lol/act/img/js/heroList/hero_list.js");
            xhr.send();
            xhr.onreadystatechange = () => {
                if (xhr.readyState == 4) {
                    let res = JSON.parse(xhr.response);
                    console.log(res)
                    this.list = res.hero;
                }
            }
        },
        mounted() {
            console.log("组件渲染后");
        }

    }
    let cart = {
        template: "<h1>购物车</h1>",
        created() {
            console.log("购物车组件创建后");
        },
        activated() {
            /* 可以再次激活组件 */
            console.log("组件激活后");
        }
    }
    let cate = {
        template: "<h1>分类</h1>",
        created() {
            console.log("分类组建创建后");
        }

    }
    let mine = {
        template: "<h1>我的</h1>",
        created() {
            console.log("我的组件创建后");
        }

    }

    new Vue({
        el: "#app",
        components: {
            home,
            cart,
            cate,
            mine
        },
        data: {
            navList: ["首页", "购物车", "分类", "我的"],
            componentName: "home",
            active: 0
        },
        methods: {
            goNav(index) {
                this.active = index;
                switch (index) {
                    case 0: this.componentName = "home"; break;
                    case 1: this.componentName = "cart"; break;
                    case 2: this.componentName = "cate"; break;
                    default: this.componentName = "mine"; break;
                }
            }
        }
    })
</script>

</html>