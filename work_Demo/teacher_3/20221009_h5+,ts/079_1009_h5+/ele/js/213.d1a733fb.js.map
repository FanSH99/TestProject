{"version":3,"file":"js/213.d1a733fb.js","mappings":"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","sources":["webpack://ele/./src/views/shopInfo/components/pingjia.vue","webpack://ele/./node_modules/@better-scroll/pull-up/dist/pull-up.esm.js","webpack://ele/src/views/shopInfo/components/pingjia.vue","webpack://ele/./src/views/shopInfo/components/pingjia.vue?88cb","webpack://ele/./src/views/shopInfo/components/pingjia.vue?5617","webpack://ele/./src/tools/loadingToast.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"appraise\",staticClass:\"appraise\"},[_c('div',[(_vm.scores)?_c('div',{staticClass:\"scores\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"zonghe\"},[_vm._v(\" \"+_vm._s(Math.ceil(_vm.scores.overall_score))+\" \")]),_c('div',{staticStyle:{\"font-size\":\"16px\",\"color\":\"#666\",\"margin\":\"5px 0\"}},[_vm._v(\" 综合评价 \")]),_c('div',{staticStyle:{\"font-size\":\"13px\",\"color\":\"#b4b4b4\"}},[_vm._v(\" 高于周边商家 \"+_vm._s(Math.round(_vm.scores.compare_rating * 1000) / 10)+\"% \")])]),_c('div',{staticClass:\"right\"},[_c('div',{staticStyle:{\"font-size\":\"15px\",\"color\":\"#666\"}},[_vm._v(\" 服务态度： \"),_c('van-rate',{attrs:{\"size\":7,\"readonly\":\"\",\"color\":\"#f60\",\"void-icon\":\"star\",\"void-color\":\"#eee\"},model:{value:(_vm.scores.service_score),callback:function ($$v) {_vm.$set(_vm.scores, \"service_score\", $$v)},expression:\"scores.service_score\"}}),_c('span',{staticStyle:{\"font-size\":\"13px\",\"margin-left\":\"5px\",\"color\":\"#f60\"}},[_vm._v(\"4.7\")])],1),_c('div',{staticStyle:{\"font-size\":\"15px\",\"color\":\"#666\",\"margin\":\"5px 0\"}},[_vm._v(\" 菜品评价： \"),_c('van-rate',{attrs:{\"size\":7,\"readonly\":\"\",\"color\":\"#f60\",\"void-icon\":\"star\",\"void-color\":\"#eee\"},model:{value:(_vm.scores.food_score),callback:function ($$v) {_vm.$set(_vm.scores, \"food_score\", $$v)},expression:\"scores.food_score\"}}),_c('span',{staticStyle:{\"font-size\":\"13px\",\"margin-left\":\"5px\",\"color\":\"#f60\"}},[_vm._v(\"4.8\")])],1),_c('div',{staticStyle:{\"font-size\":\"14px\",\"color\":\"#666\"}},[_vm._v(\" 送达时间：\"),_c('span',{staticStyle:{\"font-size\":\"13px\",\"color\":\"#b4b4b4\"}},[_vm._v(_vm._s(_vm.scores.deliver_time)+\"分钟\")])])])]):_vm._e(),_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"tags\"},_vm._l((_vm.tags),function(item,index){return _c('div',{key:index,on:{\"click\":function($event){return _vm.changeTags(index,item.name)}}},[_c('div',{class:{\n              tag: true,\n              active_tag: _vm.active == index,\n              unsatisfied: item.unsatisfied,\n            }},[_vm._v(\" \"+_vm._s(item.name)+\" (\"+_vm._s(item.count)+\") \")])])}),0),_c('div',{staticClass:\"ratings\"},_vm._l((_vm.list),function(item,index){return _c('div',{key:index,staticClass:\"rating_item\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm._f(\"getUrl\")(item.avatar),\"alt\":\"\"}})]),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"username\"},[_vm._v(\" \"+_vm._s(item.username)+\" \")]),_c('div',[_c('van-rate',{attrs:{\"icon\":\"star\",\"void-icon\":\"star-o\",\"readonly\":\"\",\"size\":\"10\",\"color\":\"#FF9A0D\"},model:{value:(item.rating_star),callback:function ($$v) {_vm.$set(item, \"rating_star\", $$v)},expression:\"item.rating_star\"}}),_c('span',{staticClass:\"time_spent_desc\"},[_vm._v(_vm._s(item.time_spent_desc))])],1),_c('div',[_c('div',{staticClass:\"item_foods\"},_vm._l((item.item_ratings),function(value,i){return _c('div',{key:i},[_c('img',{staticClass:\"foods_img\",attrs:{\"src\":_vm._f(\"getUrl\")(value.image_hash),\"alt\":\"\"}})])}),0),_c('div',{staticClass:\"item_food_name\"},_vm._l((item.item_ratings),function(value,i){return _c('div',{key:i,staticClass:\"food_name\"},[_vm._v(\" \"+_vm._s(value.food_name)+\" \")])}),0)])]),_c('div',{staticClass:\"right\"},[_vm._v(\" \"+_vm._s(item.rated_at)+\" \")])])}),0)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*!\n * better-scroll / pull-up\n * (c) 2016-2021 ustbhuangyi\n * Released under the MIT License.\n */\n// ssr support\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\r\n!!(ua && /wechatdevtools/.test(ua));\r\nua && ua.indexOf('android') > 0;\r\n/* istanbul ignore next */\r\n((function () {\r\n    if (typeof ua === 'string') {\r\n        var regex = /os (\\d\\d?_\\d(_\\d)?)/;\r\n        var matches = regex.exec(ua);\r\n        if (!matches)\r\n            return false;\r\n        var parts = matches[1].split('_').map(function (item) {\r\n            return parseInt(item, 10);\r\n        });\r\n        // ios version >= 13.4 issue 982\r\n        return !!(parts[0] === 13 && parts[1] >= 4);\r\n    }\r\n    return false;\r\n}))();\r\n/* istanbul ignore next */\r\nvar supportsPassive = false;\r\n/* istanbul ignore next */\r\nif (inBrowser) {\r\n    var EventName = 'test-passive';\r\n    try {\r\n        var opts = {};\r\n        Object.defineProperty(opts, 'passive', {\r\n            get: function () {\r\n                supportsPassive = true;\r\n            },\r\n        }); // https://github.com/facebook/flow/issues/285\r\n        window.addEventListener(EventName, function () { }, opts);\r\n    }\r\n    catch (e) { }\r\n}\n\nvar extend = function (target, source) {\r\n    for (var key in source) {\r\n        target[key] = source[key];\r\n    }\r\n    return target;\r\n};\n\nvar elementStyle = (inBrowser &&\r\n    document.createElement('div').style);\r\nvar vendor = (function () {\r\n    /* istanbul ignore if  */\r\n    if (!inBrowser) {\r\n        return false;\r\n    }\r\n    var transformNames = [\r\n        {\r\n            key: 'standard',\r\n            value: 'transform',\r\n        },\r\n        {\r\n            key: 'webkit',\r\n            value: 'webkitTransform',\r\n        },\r\n        {\r\n            key: 'Moz',\r\n            value: 'MozTransform',\r\n        },\r\n        {\r\n            key: 'O',\r\n            value: 'OTransform',\r\n        },\r\n        {\r\n            key: 'ms',\r\n            value: 'msTransform',\r\n        },\r\n    ];\r\n    for (var _i = 0, transformNames_1 = transformNames; _i < transformNames_1.length; _i++) {\r\n        var obj = transformNames_1[_i];\r\n        if (elementStyle[obj.value] !== undefined) {\r\n            return obj.key;\r\n        }\r\n    }\r\n    /* istanbul ignore next  */\r\n    return false;\r\n})();\r\n/* istanbul ignore next  */\r\nfunction prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return style;\r\n    }\r\n    if (vendor === 'standard') {\r\n        if (style === 'transitionEnd') {\r\n            return 'transitionend';\r\n        }\r\n        return style;\r\n    }\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\nvendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\r\nvar transform = prefixStyle('transform');\r\nvar transition = prefixStyle('transition');\r\ninBrowser && prefixStyle('perspective') in elementStyle;\r\n({\r\n    transform: transform,\r\n    transition: transition,\r\n    transitionTimingFunction: prefixStyle('transitionTimingFunction'),\r\n    transitionDuration: prefixStyle('transitionDuration'),\r\n    transitionDelay: prefixStyle('transitionDelay'),\r\n    transformOrigin: prefixStyle('transformOrigin'),\r\n    transitionEnd: prefixStyle('transitionEnd'),\r\n    transitionProperty: prefixStyle('transitionProperty'),\r\n});\n\nvar sourcePrefix = 'plugins.pullUpLoad';\r\nvar propertiesMap = [\r\n    {\r\n        key: 'finishPullUp',\r\n        name: 'finishPullUp'\r\n    },\r\n    {\r\n        key: 'openPullUp',\r\n        name: 'openPullUp'\r\n    },\r\n    {\r\n        key: 'closePullUp',\r\n        name: 'closePullUp'\r\n    },\r\n    {\r\n        key: 'autoPullUpLoad',\r\n        name: 'autoPullUpLoad'\r\n    }\r\n];\r\nvar propertiesConfig = propertiesMap.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix + \".\" + item.name\r\n    };\r\n});\n\nvar PULL_UP_HOOKS_NAME = 'pullingUp';\r\nvar PullUp = /** @class */ (function () {\r\n    function PullUp(scroll) {\r\n        this.scroll = scroll;\r\n        this.pulling = false;\r\n        this.watching = false;\r\n        this.init();\r\n    }\r\n    PullUp.prototype.init = function () {\r\n        this.handleBScroll();\r\n        this.handleOptions(this.scroll.options.pullUpLoad);\r\n        this.handleHooks();\r\n        this.watch();\r\n    };\r\n    PullUp.prototype.handleBScroll = function () {\r\n        this.scroll.registerType([PULL_UP_HOOKS_NAME]);\r\n        this.scroll.proxy(propertiesConfig);\r\n    };\r\n    PullUp.prototype.handleOptions = function (userOptions) {\r\n        if (userOptions === void 0) { userOptions = {}; }\r\n        userOptions = (userOptions === true ? {} : userOptions);\r\n        var defaultOptions = {\r\n            threshold: 0,\r\n        };\r\n        this.options = extend(defaultOptions, userOptions);\r\n        this.scroll.options.probeType = 3 /* Realtime */;\r\n    };\r\n    PullUp.prototype.handleHooks = function () {\r\n        var _this = this;\r\n        this.hooksFn = [];\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.contentChanged, function () {\r\n            _this.finishPullUp();\r\n        });\r\n        this.registerHooks(scrollBehaviorY.hooks, scrollBehaviorY.hooks.eventTypes.computeBoundary, function (boundary) {\r\n            // content is smaller than wrapper\r\n            if (boundary.maxScrollPos > 0) {\r\n                // allow scrolling when content is not full of wrapper\r\n                boundary.maxScrollPos = -1;\r\n            }\r\n        });\r\n    };\r\n    PullUp.prototype.registerHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    PullUp.prototype.watch = function () {\r\n        if (this.watching) {\r\n            return;\r\n        }\r\n        this.watching = true;\r\n        this.registerHooks(this.scroll, this.scroll.eventTypes.scroll, this.checkPullUp);\r\n    };\r\n    PullUp.prototype.unwatch = function () {\r\n        this.watching = false;\r\n        this.scroll.off(this.scroll.eventTypes.scroll, this.checkPullUp);\r\n    };\r\n    PullUp.prototype.checkPullUp = function (pos) {\r\n        var _this = this;\r\n        var threshold = this.options.threshold;\r\n        if (this.scroll.movingDirectionY === 1 /* Positive */ &&\r\n            pos.y <= this.scroll.maxScrollY + threshold) {\r\n            this.pulling = true;\r\n            // must reset pulling after scrollEnd\r\n            this.scroll.once(this.scroll.eventTypes.scrollEnd, function () {\r\n                _this.pulling = false;\r\n            });\r\n            this.unwatch();\r\n            this.scroll.trigger(PULL_UP_HOOKS_NAME);\r\n        }\r\n    };\r\n    PullUp.prototype.finishPullUp = function () {\r\n        var _this = this;\r\n        // reset Direction, fix #936\r\n        this.scroll.scroller.scrollBehaviorY.setMovingDirection(0 /* Default */);\r\n        if (this.pulling) {\r\n            this.scroll.once(this.scroll.eventTypes.scrollEnd, function () {\r\n                _this.watch();\r\n            });\r\n        }\r\n        else {\r\n            this.watch();\r\n        }\r\n    };\r\n    // allow 'true' type is compat for beta version implements\r\n    PullUp.prototype.openPullUp = function (config) {\r\n        if (config === void 0) { config = {}; }\r\n        this.handleOptions(config);\r\n        this.watch();\r\n    };\r\n    PullUp.prototype.closePullUp = function () {\r\n        this.unwatch();\r\n    };\r\n    PullUp.prototype.autoPullUpLoad = function () {\r\n        var threshold = this.options.threshold;\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        if (this.pulling || !this.watching) {\r\n            return;\r\n        }\r\n        // simulate a pullUp action\r\n        var NEGATIVE_VALUE = -1;\r\n        var outOfBoundaryPos = scrollBehaviorY.maxScrollPos + threshold + NEGATIVE_VALUE;\r\n        this.scroll.scroller.scrollBehaviorY.setMovingDirection(NEGATIVE_VALUE);\r\n        this.scroll.scrollTo(this.scroll.x, outOfBoundaryPos, this.scroll.options.bounceTime);\r\n    };\r\n    PullUp.pluginName = 'pullUpLoad';\r\n    return PullUp;\r\n}());\n\nexport default PullUp;\n","<template>\n  <div class=\"appraise\" ref=\"appraise\">\n    <div>\n      <div class=\"scores\" v-if=\"scores\">\n        <div class=\"left\">\n          <div class=\"zonghe\">\n            {{ Math.ceil(scores.overall_score) }}\n          </div>\n          <div style=\"font-size: 16px; color: #666; margin: 5px 0\">\n            综合评价\n          </div>\n          <div style=\"font-size: 13px; color: #b4b4b4\">\n            高于周边商家 {{ Math.round(scores.compare_rating * 1000) / 10 }}%\n          </div>\n        </div>\n        <div class=\"right\">\n          <div style=\"font-size: 15px; color: #666\">\n            服务态度：\n            <van-rate\n              v-model=\"scores.service_score\"\n              :size=\"7\"\n              readonly\n              color=\"#f60\"\n              void-icon=\"star\"\n              void-color=\"#eee\"\n            />\n            <span style=\"font-size: 13px; margin-left: 5px; color: #f60\"\n              >4.7</span\n            >\n          </div>\n          <div style=\"font-size: 15px; color: #666; margin: 5px 0\">\n            菜品评价：\n            <van-rate\n              v-model=\"scores.food_score\"\n              :size=\"7\"\n              readonly\n              color=\"#f60\"\n              void-icon=\"star\"\n              void-color=\"#eee\"\n            />\n            <span style=\"font-size: 13px; margin-left: 5px; color: #f60\"\n              >4.8</span\n            >\n          </div>\n          <div style=\"font-size: 14px; color: #666\">\n            送达时间：<span style=\"font-size: 13px; color: #b4b4b4\"\n              >{{ scores.deliver_time }}分钟</span\n            >\n          </div>\n        </div>\n      </div>\n      <div class=\"list\">\n        <div class=\"tags\">\n          <div\n            v-for=\"(item, index) in tags\"\n            :key=\"index\"\n            @click=\"changeTags(index,item.name)\"\n          >\n            <div\n              :class=\"{\n                tag: true,\n                active_tag: active == index,\n                unsatisfied: item.unsatisfied,\n              }\"\n            >\n              {{ item.name }} ({{ item.count }})\n            </div>\n          </div>\n        </div>\n        <div class=\"ratings\">\n          <div v-for=\"(item, index) in list\" :key=\"index\" class=\"rating_item\">\n            <div class=\"left\">\n              <img :src=\"item.avatar | getUrl\" alt=\"\" />\n            </div>\n            <div class=\"center\">\n              <div class=\"username\">\n                {{ item.username }}\n              </div>\n              <div>\n                <van-rate\n                  v-model=\"item.rating_star\"\n                  icon=\"star\"\n                  void-icon=\"star-o\"\n                  readonly\n                  size=\"10\"\n                  color=\"#FF9A0D\"\n                />\n                <span class=\"time_spent_desc\">{{ item.time_spent_desc }}</span>\n              </div>\n              <div>\n                <div class=\"item_foods\">\n                  <div v-for=\"(value, i) in item.item_ratings\" :key=\"i\">\n                    <img\n                      :src=\"value.image_hash | getUrl\"\n                      alt=\"\"\n                      class=\"foods_img\"\n                    />\n                  </div>\n                </div>\n                <div class=\"item_food_name\">\n                  <div\n                    v-for=\"(value, i) in item.item_ratings\"\n                    :key=\"i\"\n                    class=\"food_name\"\n                  >\n                    {{ value.food_name }}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"right\">\n              {{ item.rated_at }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport BScroll from \"@better-scroll/core\";\nimport Pullup from \"@better-scroll/pull-up\";\nBScroll.use(Pullup);\n// 引入评分api\nimport { getShopScores, getTags, pingjiaMsg } from \"@/api/shop\";\nimport { hideLoading, showLoading } from \"@/tools/loadingToast\";\nexport default {\n  data() {\n    return {\n      active: 0,\n      pageScroll: null,\n      scores: null,\n      tags: [],\n      food_score: 5,\n      query: {\n        tag_name: \"全部\",\n        offset: 0,\n        limit: 10,\n      },\n      list: [],\n      isLoading:false\n    };\n  },\n  async mounted() {\n    // 发送请求获取评分\n    let res = await getShopScores(this.$store.state.id);\n    this.scores = res.data;\n    let res1 = await getTags(this.$store.state.id);\n    console.log(res1);\n    this.tags = res1.data;\n    let res2 = await pingjiaMsg(this.$store.state.id, this.query);\n    this.list = [...this.list, ...res2.data];\n    this.$nextTick(() => {\n      this.pageScroll = new BScroll(this.$refs.appraise, {\n        click: true,\n        probeType: 3,\n        pullUpLoad: true,\n      });\n      this.pageScroll.on(\"pullingUp\",this.pullingUpHandler)\n    });\n  },\n  methods: {\n    changeTags(index,tag_name) {\n      this.active = index;\n      this.query.tag_name = tag_name;\n      this.list = [];\n      this.query.offset = 0;\n      this.getDataList();\n    },\n    async getDataList() {\n      this.isLoading = true;\n      showLoading();\n      let res = await pingjiaMsg(this.$store.state.id, this.query);\n      console.log(res);\n      this.list = [...this.list, ...res.data];\n      this.isLoading = false\n      hideLoading();\n    //   结束上啦加载行为\n      this.pageScroll.finishPullUp();\n    //   重新计算 BetterScroll，当 DOM 结构发生变化的时候务必要调用确保滚动的效果正常\n     this.pageScroll.refresh();\n    },\n    pullingUpHandler(){\n        if(this.isLoading){\n            return \n        }\n      this.query.offset += 10;\n      this.getDataList();\n    }\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.appraise {\n  width: 100%;\n  height: calc(100vh - 120px - 11.73333vw);\n  background: #f1f1f1;\n  overflow: hidden;\n\n  .scores {\n    width: 100%;\n    padding: 10px;\n    display: flex;\n    background: #fff;\n    border-top: 1px solid #e4e4e4;\n    .left {\n      width: 50%;\n      text-align: center;\n\n      .zonghe {\n        font-size: 25px;\n        color: #f60;\n      }\n    }\n\n    .right {\n      width: 50%;\n    }\n  }\n\n  .list {\n    background: #fff;\n    margin-top: 10px;\n\n    .tags {\n      display: flex;\n      flex-wrap: wrap;\n      padding: 10px;\n      border-bottom: 1px solid #f1f1f1;\n\n      .tag {\n        font-size: 13px;\n        padding: 7px;\n        border-radius: 4px;\n        background: #ebf5ff;\n        color: #6d7885;\n        margin-top: 5px;\n        margin-right: 10px;\n      }\n\n      .unsatisfied {\n        background: #f5f5f5;\n        color: #aaa;\n      }\n\n      .active_tag {\n        background: #3190e8;\n        color: #fff;\n      }\n    }\n\n    .ratings {\n      width: 100%;\n      padding: 20px 10px;\n      padding-top: 10px;\n\n      .rating_item {\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n        padding: 15px 0;\n        border-bottom: 1px solid #f1f1f1;\n\n        .left {\n          width: 15%;\n          text-align: center;\n\n          img {\n            width: 35px;\n            height: 35px;\n            border-radius: 50%;\n            display: block;\n            margin: 0 auto;\n          }\n        }\n\n        .center {\n          width: 65%;\n\n          .item_foods {\n            margin: 5px 0;\n            display: flex;\n          }\n\n          .foods_img {\n            width: 70px;\n            margin-right: 10px;\n          }\n\n          .item_food_name {\n            display: flex;\n\n            .food_name {\n              margin-right: 5px;\n              width: 60px;\n              padding: 5px;\n              border-radius: 3px;\n              border: 1px solid #e4e4e4;\n              overflow: hidden;\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              font-size: 13px;\n              color: #b4b4b4;\n            }\n          }\n\n          .username {\n            font-size: 14px;\n            color: #666;\n            margin-bottom: 5px;\n          }\n\n          .time_spent_desc {\n            font-size: 14px;\n            color: #666;\n            margin-left: 5px;\n          }\n        }\n\n        .right {\n          width: 20%;\n          text-align: center;\n          font-size: 13px;\n          color: #b4b4b4;\n        }\n      }\n    }\n  }\n\n  .loading {\n    width: 100%;\n    padding: 10px;\n    text-align: center;\n    background: #fff;\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pingjia.vue?vue&type=template&id=036d7fba&scoped=true&\"\nimport script from \"./pingjia.vue?vue&type=script&lang=js&\"\nexport * from \"./pingjia.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pingjia.vue?vue&type=style&index=0&id=036d7fba&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"036d7fba\",\n  null\n  \n)\n\nexport default component.exports","import { Toast } from \"vant\"\n\nlet showLoading = ()=>{\n    Toast({\n        type:\"loading\",\n        message:\"加载中...\",\n        duration:0,\n        forbidClick:true\n    })\n}\n\nlet hideLoading = ()=>{\n    Toast.clear();\n}\n\nexport {\n    showLoading,\n    hideLoading\n}"],"names":["render","_vm","this","_c","_self","ref","staticClass","scores","_v","_s","Math","ceil","overall_score","staticStyle","round","compare_rating","attrs","model","value","service_score","callback","$$v","$set","expression","food_score","deliver_time","_e","_l","tags","item","index","key","on","$event","changeTags","name","class","tag","active_tag","active","unsatisfied","count","list","_f","avatar","username","rating_star","time_spent_desc","item_ratings","i","image_hash","food_name","rated_at","staticRenderFns","inBrowser","window","ua","navigator","userAgent","toLowerCase","test","indexOf","regex","matches","exec","parts","split","map","parseInt","EventName","opts","Object","defineProperty","get","addEventListener","e","extend","target","source","elementStyle","document","createElement","style","vendor","transformNames","_i","transformNames_1","length","obj","undefined","prefixStyle","charAt","toUpperCase","substr","sourcePrefix","propertiesMap","propertiesConfig","sourceKey","PULL_UP_HOOKS_NAME","PullUp","scroll","pulling","watching","init","prototype","handleBScroll","handleOptions","options","pullUpLoad","handleHooks","watch","registerType","proxy","userOptions","defaultOptions","threshold","probeType","_this","hooksFn","scrollBehaviorY","scroller","registerHooks","hooks","eventTypes","contentChanged","finishPullUp","computeBoundary","boundary","maxScrollPos","handler","push","checkPullUp","unwatch","off","pos","movingDirectionY","y","maxScrollY","once","scrollEnd","trigger","setMovingDirection","openPullUp","config","closePullUp","autoPullUpLoad","NEGATIVE_VALUE","outOfBoundaryPos","scrollTo","x","bounceTime","pluginName","BScroll","data","pageScroll","query","tag_name","offset","limit","isLoading","console","click","methods","showLoading","hideLoading","pullingUpHandler","component","Toast","type","message","duration","forbidClick"],"sourceRoot":""}