<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自定义指令</title>
</head>

<body>
    <div id="app">
        <h1 v-color="'red'">{{msg}}</h1>
        <h3 v-color="'blue'">风吹雨成花</h3>
        <input type="text" value="lllll"><br><br>
        <input type="text" value="时间追不上白马" v-color="color"  v-focus=""></input>
        
        <my-component></my-component>
    </div>

</body>
<script src="../bin/vue-2.7.10.js"></script>
<script>
    /* 2022年9月9日14:45:29 
    自定义指令是自己定义的vue指令。分为两类。
    1.全局自定义指令 ---可以作用在任意vue实例
    2.局部自定义指令。---只能作用在当前vue实例。
    */

    let myComponent = {
        template: "<h4 v-color='yellow' v-size='size' v-mytext='text'>我是一个组件</h4>",
        data() {
            return {
                yellow: "yellow",
                size: "30px",
                text: "少年被风催大"

            }
        },
        // 定义局部自定义指令
        directives: {
            // 属性名表示指令名称，属性值是对象。钩子函数
            "size": {
                inserted(el, data) {
                    el.style.fontSize = data.value
                }
            },
            "mytext": {
                inserted(el, data) {
                    el.innerText = data.value;
                }
            }
        }
    }
    // 定义全局自定义指令。 directive指令方向。参数1自定义名称，参数2对象
    Vue.directive("color", {
        // 当指令插入dom时触发
        inserted(el, data) {
            // el表示当前指令所作用的dom对象。
            // console.log(el);
            // data表示当前指令信息对象。 其中data.value为指令值。
            // console.log(data);
            el.style.color = data.value;
            // el.classList.add("red")
            // console.log("当指令插入到dom时触发");

        }
    })
    
    // 注册一个全局自定义指令 `v-focus`
    Vue.directive('focus', {
      // 当被绑定的元素插入到 DOM 中时……
      inserted: function (el) {
        // 聚焦元素
        
        el.focus()  // 页面加载完成之后自动让输入框获取到焦点的小功能
      }
    })
    new Vue({
        el: "#app",
        data: {
            msg: "长河落日圆",
            color: "#333",
        },
        components: {
            myComponent,
        }
    })
</script>

</html>